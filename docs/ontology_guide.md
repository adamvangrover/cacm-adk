# CACM-ADK Ontology Guide (v0.3)

This document provides a guide to the ontology used within the CACM-ADK project. The primary ontology file is `ontology/credit_analysis_ontology_v0.3/credit_ontology_v0.3.ttl`.

This guide is intended for developers, data modelers, and anyone needing to understand the semantic structure of the data processed and generated by the CACM-ADK.

**For global project conventions, see our root [AGENT.MD](../../AGENT.MD). For developer-specific workflows, see the [Developer Onboarding Guide](./developer_guide.md).**

## 1. Introduction to the Ontology

The CACM-ADK ontology defines the concepts (classes), relationships (properties), and individuals relevant to credit analysis and the functioning of the ADK itself. It aims to provide a shared understanding and a structured vocabulary for:

*   Describing financial instruments, entities, metrics, and risks.
*   Defining the inputs, outputs, and parameters of Credit Analysis Capability Modules (CACMs).
*   Structuring data for storage in and retrieval from a Knowledge Graph (KG).
*   Enabling more intelligent agent behavior and future reasoning capabilities.

The current version is **0.3.0**, which includes significant expansions for Alternative Data, ESG (Environmental, Social, Governance) factors, and ADK architectural components.

## 2. Namespaces

The ontology utilizes several namespaces (prefixes):

*   **`cacm_ont:`**: `<http://example.com/ontology/cacm_credit_ontology/0.3#>` - Core concepts from the initial modeling, now part of the v0.3 structure.
*   **`kgclass:`**: `<http://example.com/ontology/cacm_credit_ontology/0.3/classes/#>` - Primary namespace for classes within the v0.3 ontology.
*   **`kgprop:`**: `<http://example.com/ontology/cacm_credit_ontology/0.3/properties/#>` - Primary namespace for properties (relationships and attributes) within the v0.3 ontology.
*   **`adkarch:`**: `<http://www.example.com/adk/architecture#>` - For defining ADK architectural components like Agents and Skills.
*   **`altdata:`**: `<http://example.com/ontology/cacm_credit_ontology/0.3/alternative_data#>` - For classes and properties related to alternative data sources.
*   **`esg:`**: `<http://example.com/ontology/cacm_credit_ontology/0.3/esg#>` - For classes and properties related to ESG factors.
*   **`rdf:`**: `<http://www.w3.org/1999/02/22-rdf-syntax-ns#>`
*   **`rdfs:`**: `<http://www.w3.org/2000/01/rdf-schema#>`
*   **`owl:`**: `<http://www.w3.org/2002/07/owl#>`
*   **`xsd:`**: `<http://www.w3.org/2001/XMLSchema#>`
*   `dcterms:`: `<http://purl.org/dc/terms/>`
*   `skos:`: `<http://www.w3.org/2004/02/skos/core#>`

## 3. Core Concepts & Usage Examples

This section highlights key parts of the ontology and demonstrates how they are used, particularly in the context of KG population and querying by agents like `KnowledgeGraphAgent` and `AnalysisAgent`.

### 3.1. Representing a Company and Basic Financials

Let's represent Microsoft (MSFT) and a few basic facts.

**Ontology Terms Used:**
*   `kgclass:Obligor` (for MSFT itself)
*   `rdfs:label` (for human-readable name)
*   `kgprop:hasTickerSymbol` (for stock ticker)
*   `kgclass:FinancialStatement`
*   `kgprop:pertainsTo` (to link statement to company)
*   `dcterms:date` (for statement date)
*   `kgclass:BalanceSheetItem`, `kgclass:IncomeStatementItem`
*   `kgprop:hasValue` (for the value of a financial item)
*   `kgprop:hasCurrency` (for the currency of the value)
*   `cacm_ont:hasDataSource` (to link item to statement)

**Example RDF Triples (Turtle format):**

```turtle
@prefix kgclass: <http://example.com/ontology/cacm_credit_ontology/0.3/classes/#> .
@prefix kgprop: <http://example.com/ontology/cacm_credit_ontology/0.3/properties/#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .

# Define Microsoft as an Obligor instance
<http://example.com/entity/MSFT> a kgclass:Obligor ;
    rdfs:label "Microsoft Corp."^^xsd:string ;
    kgprop:hasTickerSymbol "MSFT"^^xsd:string .

# Define a Financial Statement for MSFT
<http://example.com/financialstatement/MSFT_FY2023_Annual> a kgclass:FinancialStatement ;
    kgprop:pertainsTo <http://example.com/entity/MSFT> ;
    dcterms:date "2023-06-30"^^xsd:date ;
    rdfs:label "MSFT Fiscal Year 2023 Annual Report Data"^^xsd:string .

# Represent Current Assets
<http://example.com/financialitem/MSFT_FY2023_CurrentAssets> a kgclass:BalanceSheetItem ;
    rdfs:label "Current Assets FY2023"^^xsd:string ;
    kgprop:hasValue "184257000000"^^xsd:decimal ; # Example value
    kgprop:hasCurrency "USD"^^xsd:string ;
    cacm_ont:hasDataSource <http://example.com/financialstatement/MSFT_FY2023_Annual> ;
    kgprop:pertainsTo <http://example.com/entity/MSFT> . # Can also link directly to company

# Represent Total Revenue
<http://example.com/financialitem/MSFT_FY2023_TotalRevenue> a kgclass:IncomeStatementItem ;
    rdfs:label "Total Revenue FY2023"^^xsd:string ;
    kgprop:hasValue "211915000000"^^xsd:decimal ; # Example value
    kgprop:hasCurrency "USD"^^xsd:string ;
    cacm_ont:hasDataSource <http://example.com/financialstatement/MSFT_FY2023_Annual> ;
    kgprop:pertainsTo <http://example.com/entity/MSFT> .
```

**`KGPopulationSkill` Interaction:**
The `KGPopulationSkill` would take structured input (e.g., a Python dictionary) representing this data and generate the above Turtle triples.

**`KnowledgeGraphAgent` Querying Example (SPARQL):**
To get Microsoft's Total Revenue for FY2023:
```sparql
PREFIX kgclass: <http://example.com/ontology/cacm_credit_ontology/0.3/classes/#>
PREFIX kgprop: <http://example.com/ontology/cacm_credit_ontology/0.3/properties/#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?revenueValue ?currency
WHERE {
  <http://example.com/entity/MSFT> rdfs:label "Microsoft Corp."^^xsd:string ;
                                     kgprop:hasTickerSymbol "MSFT"^^xsd:string .
  ?revenueItem a kgclass:IncomeStatementItem ;
               rdfs:label "Total Revenue FY2023"^^xsd:string ;
               kgprop:pertainsTo <http://example.com/entity/MSFT> ;
               kgprop:hasValue ?revenueValue ;
               kgprop:hasCurrency ?currency .
}
```

### 3.2. Representing an ESG Factor: Carbon Emissions

**Ontology Terms Used:**
*   `esg:CarbonEmission` (subclass of `esg:EnvironmentalFactor`)
*   `esg:reportsESGMetric` (linking company to the emission metric instance)
*   `rdfs:label`
*   `esg:metricValue`
*   `esg:metricUnit`
*   `esg:reportingPeriod`
*   `esg:emissionScope` (e.g., Scope 1, Scope 2)
*   `esg:dataSource` (e.g., "Company Sustainability Report 2023")

**Example RDF Triples (Turtle format):**
```turtle
@prefix esg: <http://example.com/ontology/cacm_credit_ontology/0.3/esg#> .
@prefix kgprop: <http://example.com/ontology/cacm_credit_ontology/0.3/properties/#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<http://example.com/entity/MSFT> esg:reportsESGMetric <http://example.com/esgmetric/MSFT_Scope1_2023> .

<http://example.com/esgmetric/MSFT_Scope1_2023> a esg:CarbonEmission ;
    rdfs:label "MSFT Scope 1 GHG Emissions 2023"^^xsd:string ;
    esg:metricValue "150000"^^xsd:decimal ; # Metric tons CO2e
    esg:metricUnit "Metric Tons CO2e"^^xsd:string ;
    esg:reportingPeriod "2023"^^xsd:gYear ;
    esg:emissionScope "Scope 1"^^xsd:string ;
    esg:dataSource "Microsoft Sustainability Report 2023"^^xsd:string ;
    kgprop:pertainsTo <http://example.com/entity/MSFT> . # Explicit link to company
```

**`AnalysisAgent` & `KnowledgeGraphAgent` Interaction:**
The `AnalysisAgent` might formulate a SPARQL query like the one below to fetch this data via `KnowledgeGraphAgent`. The results are then processed by `ESGAnalysisSkill`.

**SPARQL Query Example:**
```sparql
PREFIX esg: <http://example.com/ontology/cacm_credit_ontology/0.3/esg#>
PREFIX kgprop: <http://example.com/ontology/cacm_credit_ontology/0.3/properties/#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?label ?value ?unit ?period ?scope ?source
WHERE {
  <http://example.com/entity/MSFT> esg:reportsESGMetric ?metric .
  ?metric a esg:CarbonEmission ;
          rdfs:label ?label ;
          esg:metricValue ?value ;
          esg:metricUnit ?unit ;
          esg:reportingPeriod ?period ;
          esg:emissionScope ?scope .
  OPTIONAL { ?metric esg:dataSource ?source . }
}
```

### 3.3. Representing Alternative Data: Social Media Sentiment

**Ontology Terms Used:**
*   `altdata:SocialMediaSentiment` (subclass of `cacm_ont:Metric`)
*   `altdata:hasSocialMediaSentiment` (linking company to sentiment instance)
*   `rdfs:label`
*   `altdata:sentimentScore` (e.g., a float between -1 and 1)
*   `altdata:sentimentSource` (e.g., "Twitter", "Generic News Feed")
*   `altdata:sentimentDate`

**Example RDF Triples (Turtle format):**
```turtle
@prefix altdata: <http://example.com/ontology/cacm_credit_ontology/0.3/alternative_data#> .
@prefix kgprop: <http://example.com/ontology/cacm_credit_ontology/0.3/properties/#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<http://example.com/entity/MSFT> altdata:hasSocialMediaSentiment <http://example.com/altdata/MSFT_Sentiment_20240115_Twitter> .

<http://example.com/altdata/MSFT_Sentiment_20240115_Twitter> a altdata:SocialMediaSentiment ;
    rdfs:label "MSFT Twitter Sentiment 2024-01-15"^^xsd:string ;
    altdata:sentimentScore "0.65"^^xsd:float ;
    altdata:sentimentSource "Twitter Aggregate Feed"^^xsd:string ;
    altdata:sentimentDate "2024-01-15"^^xsd:date ;
    kgprop:pertainsTo <http://example.com/entity/MSFT> .
```

**Usage Notes:**
*   An agent responsible for alternative data processing would generate these triples.
*   Other agents (like `AnalysisAgent`) could query this sentiment data to incorporate it into broader risk assessments or reports.

### 3.4. Representing ADK Architectural Components

The `adkarch:` namespace is used to model the ADK's own components, which can be useful for documentation, validation, or dynamic capabilities.

**Ontology Terms Used:**
*   `adkarch:Agent`, `adkarch:AnalysisAgent`
*   `adkarch:SemanticSkill`
*   `adkarch:usesSkill` (property)
*   `adkarch:pluginName`, `adkarch:skillName` (data properties)

**Example RDF Triples (Conceptual - not typically stored in main instance KG):**
This kind of data might be more for a meta-level KG about the ADK itself.
```turtle
@prefix adkarch: <http://www.example.com/adk/architecture#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .

<urn:adk:component:AnalysisAgentInstance1> a adkarch:AnalysisAgent ;
    rdfs:label "Primary Analysis Agent"^^xsd:string ;
    adkarch:usesSkill <urn:adk:skill:FinancialAnalysisSkill_calculate_basic_ratios> .

<urn:adk:skill:FinancialAnalysisSkill_calculate_basic_ratios> a adkarch:SemanticSkill ;
    rdfs:label "Calculate Basic Ratios Skill"^^xsd:string ;
    adkarch:pluginName "FinancialAnalysis"^^xsd:string ;
    adkarch:skillName "calculate_basic_ratios"^^xsd:string .
```

## 4. Guidelines for Extending the Ontology

The ontology is designed to be extensible. If new concepts or properties are needed:

1.  **Check Existing Terms:** Thoroughly review the current ontology (`credit_ontology_v0.3.ttl`) to see if a suitable term already exists or if an existing term can be made more general.
2.  **Propose New Terms:**
    *   Define the new class or property.
    *   Specify its `rdfs:label` (human-readable name) and `rdfs:comment` (description).
    *   For classes, determine `rdfs:subClassOf` relationships.
    *   For properties, define `rdfs:domain` (which classes it applies to) and `rdfs:range` (the type of its value or the class it points to).
    *   Choose an appropriate namespace (e.g., `kgclass:`, `kgprop:`, or a new sub-namespace if a large new domain is being added).
3.  **Maintain Consistency:** Ensure new terms are consistent with existing modeling patterns (e.g., naming conventions, use of datatypes).
4.  **Documentation:** Add definitions and examples for new terms to this guide.
5.  **Update TTL File:** Add the new term definitions to `ontology/credit_analysis_ontology_v0.3/credit_ontology_v0.3.ttl`.
6.  **Versioning:** Consider if the changes warrant a minor version bump of the ontology.

## 5. Tools for Working with the Ontology

*   **Text Editor:** For viewing and editing the TTL file directly.
*   **Protégé Desktop:** A free, open-source ontology editor and framework. Useful for visualizing, navigating, and editing OWL ontologies. (https://protege.stanford.edu/)
*   **`rdflib` Library (Python):** For programmatically loading, parsing, querying, and manipulating the ontology.
*   **CACM-ADK Ontology API:** The `/ontology/*` API endpoints provide some level of remote introspection.

## 6. Placeholder: Detailed Mapping of Ontology to Agent Logic

*(Placeholder for future expansion)*
This section will eventually contain a more detailed mapping of how specific ontology terms are created, consumed, or reasoned about by different agents and skills within the CACM-ADK. This will provide a clearer link between the semantic model and its operationalization in the codebase.

---
*Self-reflect and double check: This expanded ontology guide is significantly more detailed than the original. It correctly references v0.3 of the ontology and its namespaces. It provides concrete examples of RDF triples for key concepts (company financials, ESG, alternative data) and corresponding SPARQL queries, which is crucial for developers using KnowledgeGraphAgent or AnalysisAgent. It also includes guidelines for extending the ontology and lists relevant tools. The placeholder for detailed mapping is appropriate for an evolving system. This fulfills the requirements of step 1.1.5.*
